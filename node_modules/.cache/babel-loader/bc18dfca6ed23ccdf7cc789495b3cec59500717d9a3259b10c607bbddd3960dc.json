{"ast":null,"code":"import React from 'react';\nimport { useRefMask } from './use-ref-mask';\nexport var useNativeMask = function (_a) {\n  var maskGenerator = _a.maskGenerator,\n    value = _a.value,\n    onChange = _a.onChange,\n    keepMask = _a.keepMask,\n    outerRef = _a.ref;\n  var selectionRef = React.useRef({\n    start: 0,\n    end: 0\n  });\n  var onSelectionChange = React.useCallback(function (event) {\n    selectionRef.current = event.nativeEvent.selection;\n  }, []);\n  var getCursorPosition = React.useCallback(function () {\n    var _a, _b;\n    var cursorPosition = (_b = (_a = selectionRef.current) === null || _a === void 0 ? void 0 : _a.start) !== null && _b !== void 0 ? _b : 0;\n    return cursorPosition;\n  }, []);\n  var setCursorPosition = React.useCallback(function (cursorPosition, el) {\n    if (el === null || el === void 0 ? void 0 : el.setNativeProps) {\n      var selection = {\n        start: cursorPosition,\n        end: cursorPosition\n      };\n      selectionRef.current = selection;\n      el.setNativeProps({\n        selection: selection\n      });\n    }\n  }, []);\n  var _b = useRefMask({\n      value: value,\n      maskGenerator: maskGenerator,\n      getCursorPosition: getCursorPosition,\n      setCursorPosition: setCursorPosition,\n      onChange: onChange,\n      keepMask: keepMask,\n      ref: outerRef\n    }),\n    displayValue = _b.displayValue,\n    setDisplayValue = _b.setDisplayValue,\n    ref = _b.ref;\n  var onChangeText = React.useCallback(function (text) {\n    var _a, _b, _c, _d, _e;\n    var position = ((_b = (_a = selectionRef.current) === null || _a === void 0 ? void 0 : _a.start) !== null && _b !== void 0 ? _b : 0) + ((_c = text === null || text === void 0 ? void 0 : text.length) !== null && _c !== void 0 ? _c : 0) - ((_d = displayValue === null || displayValue === void 0 ? void 0 : displayValue.length) !== null && _d !== void 0 ? _d : 0);\n    var selection = {\n      start: position,\n      end: position\n    };\n    selectionRef.current = selection;\n    (_e = ref.current) === null || _e === void 0 ? void 0 : _e.setNativeProps({\n      selection: selection\n    });\n    return setDisplayValue(text);\n  }, [setDisplayValue, displayValue, ref]);\n  return {\n    value: displayValue,\n    onChangeText: onChangeText,\n    onSelectionChange: onSelectionChange,\n    ref: ref\n  };\n};","map":{"version":3,"names":["React","useRefMask","useNativeMask","_a","maskGenerator","value","onChange","keepMask","outerRef","ref","selectionRef","useRef","start","end","onSelectionChange","useCallback","event","current","nativeEvent","selection","getCursorPosition","cursorPosition","_b","setCursorPosition","el","setNativeProps","displayValue","setDisplayValue","onChangeText","text","position","_c","length","_d","_e"],"sources":["../../../src/hooks/use-native-mask.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}